%table{cellpadding: '0', cellspacing: '0', style: 'width: 100%; font-family: Arial, sans-serif;'}
  %tbody
    %tr
      %td{style: 'background-color: #f5f5f5; padding: 40px 0; text-align: center;'}
        %table{cellpadding: '0', cellspacing: '0', style: 'width: 100%; max-width: 600px; margin: 0 auto; background-color: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.1);'}
          %tbody
            / Header
            %tr
              %td{style: 'background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); padding: 40px; text-align: center; color: white;'}
                %h1{style: 'margin: 0; font-size: 28px; font-weight: bold;'}
                  Task Assigned to You
                %p{style: 'margin: 10px 0 0 0; font-size: 16px; opacity: 0.9;'}
                  You have a new task to complete

            / Content
            %tr
              %td{style: 'padding: 40px;'}
                %p{style: 'margin: 0 0 20px 0; font-size: 14px; color: #666;'}
                  Hello #{@user.full_name},

                %p{style: 'margin: 0 0 30px 0; font-size: 14px; color: #666; line-height: 1.6;'}
                  You have been assigned the following task:

                / Project Info
                %p{style: 'margin: 0 0 20px 0; font-size: 13px; color: #999;'}
                  Project: #{@project.name}

                / Task Details Box
                %table{cellpadding: '0', cellspacing: '0', style: 'width: 100%; background-color: #f0f8ff; border-left: 4px solid #00f2fe; margin: 30px 0;'}
                  %tbody
                    %tr
                      %td{style: 'padding: 20px;'}
                        %p{style: 'margin: 0 0 10px 0; font-weight: bold; color: #333; font-size: 16px;'}
                          = @task.title
                        %p{style: 'margin: 0 0 10px 0; color: #666; font-size: 13px;'}
                          %strong Priority:
                          = @task.priority || 'Medium'
                        - if @task.due_date.present?
                          %p{style: 'margin: 0 0 10px 0; color: #666; font-size: 13px;'}
                            %strong Due Date:
                            = @task.due_date.strftime('%B %d, %Y')
                            - days_left = (@task.due_date - Date.today).to_i
                            - if days_left >= 0
                              %span{style: 'color: #28a745; font-weight: bold;'}
                                = "(#{days_left} days remaining)"
                            - else
                              %span{style: 'color: #dc3545; font-weight: bold;'}
                                = "(#{-days_left} days overdue)"

                / Description
                - if @task.description.present?
                  %p{style: 'margin: 20px 0 0 0; font-size: 13px; color: #666; border-top: 1px solid #e0e0e0; padding-top: 20px;'}
                    %strong Description:
                  %p{style: 'margin: 10px 0 0 0; font-size: 13px; color: #666; line-height: 1.6;'}
                    = truncate(@task.description, length: 300)

                / CTA Button
                %table{cellpadding: '0', cellspacing: '0', style: 'margin: 30px 0; text-align: center;'}
                  %tbody
                    %tr
                      %td
                        %a.btn{href: @action_url, style: 'display: inline-block; background-color: #00f2fe; color: white; text-decoration: none; padding: 12px 30px; border-radius: 4px; font-weight: bold; font-size: 14px; transition: background-color 0.3s;'}
                          View Task

            / Footer
            %tr
              %td{style: 'background-color: #f5f5f5; padding: 30px; text-align: center; border-top: 1px solid #e0e0e0;'}
                %p{style: 'margin: 0 0 10px 0; font-size: 12px; color: #999;'}
                  This is an automated notification from PM App
                %p{style: 'margin: 0; font-size: 11px; color: #bbb;'}
                  Â© 2025 PM App. All rights reserved.
